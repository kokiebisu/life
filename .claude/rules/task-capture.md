# Task Capture（タスク自動キャプチャ）

## ルール

会話中にユーザーが「やるべきこと」「やりたいこと」を言ったら、**自動で `planning/tasks.md` の Inbox に追加する。**

### タスクと判断する基準

- 「〜しなきゃ」「〜やらないと」「〜する必要がある」
- 「〜買わないと」「〜確認しておく」「〜連絡する」
- 「〜調べたい」「〜申し込む」「〜予約する」
- 明らかにアクションが必要な発言全般
- ただし、今この会話の中で完結する作業（「このファイル編集して」等）はタスクではない

### タスクと判断しないもの

- 会話中に Claude に依頼して、その場で完了するもの
- 単なる感想・雑談
- 既に `tasks.md` に存在するもの（重複しない）

### 追加フォーマット

```markdown
- [ ] タスク内容 (YYYY-MM-DD)
```

- 日付はキャプチャした日
- 期限がわかる場合は `📅 YYYY-MM-DD` を末尾に追加
- aspect が明確なら `#aspect名` タグをつける

例:
```markdown
- [ ] 確定申告の書類を準備する (2026-02-12) #planning
- [ ] ジムのロッカーの使い方を確認する (2026-02-12) #diet 📅 2026-02-14
```

### 動作

1. タスクを検出したら `planning/tasks.md` の `## Inbox` セクション末尾に追加
2. ユーザーに「タスクに追加しておいた」と軽く報告（1行で十分）
3. 会話の流れを止めない。メインの話題を優先する

### Daily Script との連携（将来）

- daily script は Inbox のタスクを読んで、その日のデイリープランに組み込む
- 期限付きタスクは該当日に配置
- 期限なしタスクは優先度と空き時間に応じて配置
- **スケジュールに組み込む際、各タスクの所要時間をざっくり見積もる**（例: 15min, 30min, 1h）
  - タスクの性質から常識的に判断する（メール整理→30min、書類準備→1h、買い物→30min 等）
  - 見積もりはデイリープランのタスク横に記載する
  - 見積もりによって空き時間に収まるかどうかの判断材料にする

### 完了タスクの Archive（daily で実行）

daily script（または daily プランニングセッション）で以下を実行する:

1. **Notion Calendar を確認** — 完了マークがついたタスクを検出
2. **Inbox の該当タスクを `- [x]` に変更**
3. **`## Archive` セクションに月別で移動**

Archive のフォーマット:
```markdown
## Archive

### 2026-02

- [x] 確定申告の書類を準備する (2026-02-12) #planning
- [x] ジムのロッカーの使い方を確認する (2026-02-12) #diet
```

- 月が変わったら新しい `### YYYY-MM` ヘッダーを追加
- Archive が大きくなったら古い月を別ファイル（`tasks-archive-YYYY.md`）に分割してもよい
