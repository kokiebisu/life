# Event - イベント登録

ユーザーが口頭でイベントを伝えたら、適切な日時を判断してNotionカレンダーに登録する。

## Steps

1. **現在のカレンダーを確認する**
   ```bash
   bun run scripts/notion-list.ts --days 7 --json
   ```

2. **ユーザーの入力を分析する**
   - イベント名・内容
   - 日時のヒント（「来週」「金曜に」「明後日」など）
   - 所要時間の推定
   - 依存関係（「ジムの後」「開発の合間」など）

3. **日時を決定する** — 以下を考慮:
   - **既存の予定との衝突を避ける**（カレンダーの空き時間に入れる）
   - **理想のルーティン** — `aspects/routine/CLAUDE.md` を参照して空き時間を判断する
   - **イベントはルーティンより常に優先。** ルーティンと重なる場合でも、イベントをそのまま登録する。重なったルーティン項目は別の空き時間にずらすか、その日はスキップとして報告する。
   - **ユーザーが明示した日時があればそれを最優先**する

4. **提案してから登録する**
   - 決定した日時とイベント内容をユーザーに提示する
   - 確認を得てから登録する（間違った時間に入れると困るため）

5. **Notionに登録する**
   ```bash
   bun run scripts/notion-add.ts --title "イベント名" --date YYYY-MM-DD --start HH:MM --end HH:MM
   bun run scripts/notion-add.ts --title "イベント名" --date YYYY-MM-DD --allday  # 終日イベント
   ```
   説明はページ作成後に `notion-update-page` の `replace_content` で本文に書く。

6. **登録結果を報告する**

## 注意

- **既存イベントは絶対に上書き・削除しない。** 新規追加のみ行う。
- 既存イベントと重複するタスクは登録しない（空き時間にのみ追加する）。
- 日時が曖昧な場合は必ず確認する。勝手に決めすぎない。
- 複数日にまたがるイベントは日ごとに分けて登録する。
- ルーティンとの衝突がある場合は、登録結果の報告時に「○○の時間と重なるため、その日はスキップ or 別時間にずらすのがおすすめ」と一言添える。
- `$ARGUMENTS` にイベント内容が入る。
