# Process - クイックメモの言語化・配置

Notion クイックメモDB（📌）の未処理エントリを1件ずつ取り上げ、壁打ちスタイルで言語化し、life リポジトリの適切な場所に配置する。

## 引数

$ARGUMENTS — 処理したいメモのキーワードや件数指定（省略可）

## Step 1: 未処理メモの取得

1. `notion-fetch` でクイックメモDB（`30dce17f7b98803dad7afa47a1d08dd5`）を取得
2. 全エントリからステータスが「未処理」**または空（未設定）**のものを抽出する
3. 未処理が0件なら「未処理のメモはないよ」と報告して終了

**注意:** `notion-search` はセマンティック検索でありプロパティフィルタには使えない。必ず `notion-fetch` で DB 全体を取得してクライアント側でフィルタすること。

## Step 2: 一覧表示

未処理メモを一覧で表示する:

```
📌 未処理のクイックメモが N件

1. 「タイトル」(タグ) - 日付
2. ...

「タイトル」から行こう。
```

- $ARGUMENTS でキーワード指定があれば、該当するメモを優先
- なければ古い順（日付昇順）で最初の1件から開始
- **2週間以上前のメモがあれば先に確認**: 「これまだ覚えてる？不要ならスキップ/削除するよ」

## Step 3: 壁打ち（1件ずつ）

各メモについて、以下の流れで対話する:

### 3a. 文脈の復元

**まず `notion-fetch` でそのページの本文を取得する。** タイトルだけでなく、ユーザーが本文に書いた詳細も必ず確認する。

メモの内容（タイトル + 本文）とタグから、ユーザーが何を考えていたか推測して問いかける:

- 「これは〇〇について考えてたってこと？」
- 「もう少し詳しく教えて。何がきっかけだった？」
- 「どういう状態がゴール？」

**鮮度が落ちているメモほど丁寧に掘り下げる。** 数日前のメモは記憶が曖昧なので、具体的な仮説を立てて確認する。

### 3b. 調査（必要に応じて）

メモの内容によって:

- **アイデア** → 実現可能性、既存の類似サービス、技術的選択肢を調査
- **メモ** → 関連情報の深掘り、正確性の検証、追加の文脈を収集
- **リマインダー** → 期限や依存関係の確認、関連タスクの洗い出し

WebSearch、既存ファイルの参照、profile/ の確認などを活用する。

### 3c. 言語化

調査結果 + ユーザーとの対話を踏まえて、構造化された文章にまとめる。
ユーザーに「こういう形でまとめようと思うけどどう？」と確認を取る。

### 3d. 配置先の判定

内容に応じて適切な場所を決める:

| 内容の種類 | 配置先 |
|-----------|--------|
| sumitsugi 関連 | `projects/sumitsugi/` 配下 |
| ダイエット・健康 | `aspects/diet/` |
| ギター | `aspects/guitar/` |
| 投資 | `aspects/investment/` |
| 学習 | `aspects/study/` |
| 就活 | `aspects/job/search/` |
| 福岡移住 | `aspects/fukuoka/` |
| 読書 | `aspects/reading/` |
| 教会 | `aspects/church/` |
| ルーティン・習慣 | `aspects/routine/` |
| 目標・人生設計 | `profile/goals.md` or `planning/roadmap.md` |
| プロフィール更新 | `profile/` 該当ファイル |
| 設計判断・意思決定 | `memory-bank/decisions.md` |
| その他 | ユーザーに配置先を確認する |

**迷ったらユーザーに聞く。** 勝手に判断しない。

### 3e. 書き出し + 索引登録

1. 配置先にファイルを作成 or 既存ファイルに追記
2. クイックメモDBのエントリを `notion-update-page` で更新:
   - ステータス → 「処理済み」
   - リンク先 → 配置したファイルパス（例: `aspects/fukuoka/rent-research.md`）

## Step 4: 次のメモへ

1件処理が終わったら:

- 「次のメモに行く？それとも今日はここまで？」と聞く
- ユーザーが続ける場合 → Step 3 に戻って次のメモ
- やめる場合 → 処理結果のサマリーを表示して終了

## Step 5: 不要メモの処理

壁打ちの中で「もう要らない」「覚えてない」と判断されたメモは:

- ユーザーの確認を取った上で `notion-delete.ts` で削除する
- または ステータスを「処理済み」にして リンク先に「不要のため処理なし」と記録する

## 終了時のサマリー

```
📌 今日の処理結果

✅ 処理済み: N件
  - 「福岡 家賃」→ aspects/fukuoka/rent-research.md
  - 「タンパク質」→ aspects/diet/nutrition-note.md

🗑️ スキップ/削除: N件
  - 「気になった」→ 不要のため削除

📌 未処理残り: M件
```

## ルール

- **1件ずつ丁寧に。** バッチ処理しない。各メモに対して対話する
- **推測で書かない。** 不明点はユーザーに聞く
- **アクションが出てきたら task-capture ルールに従って tasks.md + todo DB にも登録する**
- **リマインダータグのメモ** → 処理後もリマインダーとしての機能が必要なら todo DB にタスクとして登録する
- **既存ファイルがある場合は追記。** 新規ファイルを乱立させない
- **書き出す内容は「あとで見返して意味がわかる」レベルに言語化する。** メモの断片をそのまま貼らない
- **ページ本文を必ず読む。** タイトルだけで判断しない
